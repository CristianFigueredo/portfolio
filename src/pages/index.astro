---
const getPreferredLanguage = () => {
  const acceptLanguage = Astro.request.headers.get('accept-language') || ''

  if (acceptLanguage.toLowerCase().includes('es')) {
    return 'es'
  }

  return 'en'
}

return Astro.redirect(`/${getPreferredLanguage()}`)
---
